(this["webpackJsonpusers-manager-front"]=this["webpackJsonpusers-manager-front"]||[]).push([[0],{197:function(e,t,s){},198:function(e,t,s){},324:function(e,t,s){},348:function(e,t,s){},349:function(e,t,s){},352:function(e,t,s){"use strict";s.r(t);var n,a=s(8),r=s(0),c=s(31),i=s.n(c),o=(s(197),s(198),s(34)),u=s(357),d=s(361),l=s(359),j=s(188),b=s(360),f=s(355),O=s(41),m=s(354),p=s(62),h=s.n(p),x="https://3xp075g60j.execute-api.us-east-1.amazonaws.com/v1/",k=function(e){return h.a.patch(x+"users/"+e.id,e)},g=function(e){return h.a.patch(x+"user_tasks/"+e.id,e)},y=function(e){return h.a.post(x+"users/"+e.user_id+"/user_tasks/",e)},v=s(83),T=s.n(v),S=s(98),I=s(356),w=s(358),F=s(91);!function(e){e[e.done=0]="done",e[e["to do"]=1]="to do"}(n||(n={}));var C=function(e){var t=e.task,s=e.userId,c=e.setModalVisible,i=e.loadTasks,u=I.a.useForm(),d=Object(o.a)(u,1)[0],l=Object(r.useState)(!1),b=Object(o.a)(l,2),f=b[0],m=b[1];Object(r.useEffect)((function(){d.setFieldsValue({description:t?t.description:"",state:t?t.state:""})}));var p=function(){var e=Object(S.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!0),t?g({description:n.description,state:n.state,user_id:s,id:t.id}).then((function(e){c(!1),m(!1),j.a.success({message:"Success",description:"The Task was successfully updated"}),d.resetFields(),i()})).catch((function(e){j.a.error({message:"Error",description:e.message}),m(!1)})):y({description:n.description,state:n.state,user_id:s}).then((function(e){c(!1),m(!1),j.a.success({message:"Success",description:"The Task was successfully created"}),d.resetFields(),i()})).catch((function(e){j.a.error({message:"Error",description:e.message}),m(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"user-form",children:Object(a.jsxs)(I.a,{form:d,scrollToFirstError:!0,onFinish:p,children:[t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:"Id:"}),Object(a.jsx)("p",{children:t.id})]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(I.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please write a description"}],children:Object(a.jsx)(w.a.TextArea,{})}),Object(a.jsx)(I.a.Item,{name:"state",label:"State",rules:[{required:!0,message:"Please write a State"},function(){return{validator:function(e,t){return t in n?Promise.resolve():Promise.reject("The state does not match the possible state values")}}}],children:Object(a.jsxs)(F.a,{children:[Object(a.jsx)(F.a.Option,{value:"done",children:"Done"}),Object(a.jsx)(F.a.Option,{value:"to do",children:"To do"})]})}),Object(a.jsx)(I.a.Item,{children:Object(a.jsx)(O.a,{className:"action-button",type:"primary",htmlType:"submit",loading:f,children:t?"Update Task":"Create Task"})})]})})},M=(s(324),function(e){var t=e.user,s=e.setModalVisible,n=e.setModalInfo,c=e.setModalTitle,i=Object(r.useState)([]),u=Object(o.a)(i,2),p=u[0],k=u[1],g=Object(r.useState)(!1),y=Object(o.a)(g,2),v=y[0],T=y[1],S=Object(r.useState)(-1),I=Object(o.a)(S,2),w=I[0],F=I[1];Object(r.useEffect)((function(){M()}),[t]);var M=function(){var e;(e=t.id,h.a.get(x+"users/"+e+"/user_tasks/").then((function(e){return e.data}))).then((function(e){e=e.map((function(e,t){return e.key=t,e})),k(e),T(!1)}))},N=function(e){var t;T(!0),(t=p[e].id,h.a.delete(x+"user_tasks/"+t)).then((function(){M(),T(!1),F(-1),j.a.success({message:"Success",description:"The Task was deleted"})})).catch((function(e){j.a.error({message:"Error",description:e}),T(!1),F(-1)}))},U=[{title:"Id",dataIndex:"id",key:"id"},{title:"User Id",dataIndex:"user_id",key:"user_id"},{title:"Description",dataIndex:"description",key:"description"},{title:"State",dataIndex:"state",key:"state"},{title:"Actions",dataIndex:"key",key:"key",render:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{style:{cursor:"pointer"},onClick:function(){return function(e){c("Edit Task"),n(Object(a.jsx)(C,{task:p[e],userId:t.id,setModalVisible:s,loadTasks:M})),s(!0)}(e)}}),Object(a.jsx)(b.a,{title:"Are you sure to delete this task?",onConfirm:function(){return N(e)},onCancel:function(){return F(-1)},okText:"Yes",cancelText:"No",visible:e===w,okButtonProps:{loading:v},children:Object(a.jsx)(l.a,{style:{cursor:"pointer",marginLeft:"20px"},onClick:function(){return function(e){F(e)}(e)}})})]})}}];return Object(a.jsx)("div",{className:"user-task",children:Object(a.jsxs)(f.a,{title:"Tasks of user ".concat(t.name),children:[Object(a.jsxs)(O.a,{className:"new-task",onClick:function(){return console.log("llega"),c("Create New Task"),n(Object(a.jsx)(C,{setModalVisible:s,userId:t.id,loadTasks:M})),void s(!0)},children:["Crete new task for ",t.name]}),Object(a.jsx)(m.a,{columns:U,dataSource:p,pagination:{pageSize:5}})]})})}),N=(s(348),s(349),function(e){var t=e.user,s=e.setModalVisible,n=e.loadUsers,c=I.a.useForm(),i=Object(o.a)(c,1)[0],u=Object(r.useState)(!1),d=Object(o.a)(u,2),l=d[0],b=d[1];Object(r.useEffect)((function(){i.setFieldsValue({name:t?t.name:""})}));var f=function(){var e=Object(S.a)(T.a.mark((function e(a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),t?(t.name=a.name,k(t).then((function(e){s(!1),b(!1),j.a.success({message:"Success",description:"The User was successfully updated"}),i.resetFields(),n()}))):(r=a.name,h.a.post(x+"users/",{name:r})).then((function(e){s(!1),b(!1),j.a.success({message:"Success",description:"The User was successfully created"}),i.resetFields(),n()}));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"user-form",children:Object(a.jsxs)(I.a,{form:i,scrollToFirstError:!0,onFinish:f,children:[t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:"Id:"}),Object(a.jsx)("p",{children:t.id})]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(I.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please write a name"}],children:Object(a.jsx)(w.a,{})}),Object(a.jsx)(I.a.Item,{children:Object(a.jsx)(O.a,{className:"action-button",type:"primary",htmlType:"submit",loading:l,children:t?"Update User":"Create User"})})]})})}),U=function(e){var t=e.setModalVisible,s=e.setModalInfo,n=e.setModalTitle,c=e.setTasksVisible,i=e.setSelectedUser,u=Object(r.useState)([]),f=Object(o.a)(u,2),p=f[0],k=f[1],g=Object(r.useState)(!1),y=Object(o.a)(g,2),v=y[0],T=y[1],S=Object(r.useState)(-1),I=Object(o.a)(S,2),w=I[0],F=I[1];Object(r.useEffect)((function(){C()}),[]);var C=function(){h.a.get(x+"users/").then((function(e){return e.data.body})).then((function(e){e=e.map((function(e,t){return e.key=t,e})),k(e),T(!1)}))},M=function(e){var t;T(!0),(t=p[e].id,h.a.delete(x+"users/"+t)).then((function(){C(),T(!1),F(-1),j.a.success({message:"Success",description:"The User was deleted"})})).catch((function(e){j.a.error({message:"Error",description:e}),T(!1),F(-1)}))},U=[{title:"Id",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Actions",dataIndex:"key",key:"key",render:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{style:{cursor:"pointer"},onClick:function(){return function(e){n("Edit User"),s(Object(a.jsx)(N,{user:p[e],setModalVisible:t,loadUsers:C})),t(!0)}(e)}}),Object(a.jsx)(b.a,{title:"Are you sure to delete this user?",onConfirm:function(){return M(e)},onCancel:function(){return F(-1)},okText:"Yes",cancelText:"No",visible:e===w,okButtonProps:{loading:v},children:Object(a.jsx)(l.a,{style:{cursor:"pointer",marginLeft:"20px"},onClick:function(){return function(e){F(e)}(e)}})})]})}},{title:"Tasks",dataIndex:"key",key:"key",render:function(e){return Object(a.jsx)(O.a,{onClick:function(){return function(e){i(p[e]),c(!0)}(e)},children:"See all"})}}];return Object(a.jsxs)("div",{className:"user-table",children:[Object(a.jsx)("h1",{children:"Users List"}),Object(a.jsx)(O.a,{className:"new-user",onClick:function(){return n("Create New User"),s(Object(a.jsx)(N,{setModalVisible:t,loadUsers:C})),void t(!0)},children:"Crete new user"}),Object(a.jsx)(m.a,{columns:U,dataSource:p,pagination:{pageSize:5}})]})};function V(){var e=Object(a.jsx)(a.Fragment,{}),t=Object(r.useState)(!1),s=Object(o.a)(t,2),n=s[0],c=s[1],i=Object(r.useState)(e),d=Object(o.a)(i,2),l=d[0],j=d[1],b=Object(r.useState)(""),f=Object(o.a)(b,2),O=f[0],m=f[1],p=Object(r.useState)(!1),h=Object(o.a)(p,2),x=h[0],k=h[1],g=Object(r.useState)({name:""}),y=Object(o.a)(g,2),v=y[0],T=y[1],S=function(){c(!1)};return Object(a.jsxs)("div",{className:"home",children:[Object(a.jsx)(u.a,{title:O,visible:n,onOk:S,onCancel:S,okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:l}),Object(a.jsx)(U,{setTasksVisible:k,setSelectedUser:T,setModalInfo:j,setModalTitle:m,setModalVisible:c}),x?Object(a.jsx)(M,{user:v,setModalInfo:j,setModalTitle:m,setModalVisible:c}):Object(a.jsx)(a.Fragment,{})]})}var E=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(V,{})})};i.a.render(Object(a.jsx)(E,{}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.81df0484.chunk.js.map